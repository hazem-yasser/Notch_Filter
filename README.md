
# Notch Filter Simulation

## Overview

This project simulates a digital notch filter using SystemVerilog and generates waveform and data outputs for analysis. The filter is tested with a mix of sinusoidal signals, including a 1 MHz passband tone and a 2.4 MHz notch tone, sampled at 6 MHz.

The simulation workflow includes:
	1.	SystemVerilog compilation and simulation using Icarus Verilog.
	2.	Waveform generation in GTKWave.
	3.	Output data plotting using Python (plot_notch_io.py).

⸻

## Directory Structure
```
notch/
├─ Makefile                  # Automates compilation, simulation, waveform viewing, and plotting
├─ Sources/
│  └─ notch_filter.sv        # Notch filter module
├─ Sim/
│  └─ tb_notch_filter.sv     # Testbench
├─ python script/
│  └─ plot_notch_io.py       # Python script to plot simulation outputs
├─ results/                  # Generated after simulation
│  ├─ notch_filter.vcd       # Waveform file
│  ├─ notch_sim.out          # Simulation output
│  ├─ notch_io.txt           # CSV-style input/output data
│  └─ *.png                  # Plots generated by Python script
└─ README.md                 # This file
```

⸻

## Prerequisites
	•	Icarus Verilog (iverilog) for SystemVerilog simulation.
	•	VVP for executing the compiled simulation.
	•	GTKWave (surfer) to view waveform outputs.
	•	Python 3 with Matplotlib (or compatible plotting libraries) for visualizing I/O data.

Installation on macOS via Homebrew (example):
```bash
brew install icarus-verilog
brew install gtkwave
brew install python3
pip3 install matplotlib
```

⸻

## Usage

1. Run the Simulation

Navigate to the project directory and use the Makefile:
```
make all
```
This will:
	1.	Copy required SystemVerilog and Python files to the current directory.
	2.	Compile notch_filter.sv and tb_notch_filter.sv.
	3.	Run the simulation, generating notch_filter.vcd and notch_io.txt.

⸻

2. View Waveform

To open the waveform in GTKWave:
```
make view
```

⸻

3. Plot Data

To plot input/output data using Python:
```
make plot
```
This will generate time-domain and frequency-domain plots (PNG) from notch_io.txt.

⸻

4. Clean Up

To remove generated files:
```
make clean
```
This removes:
	•	Simulation outputs (.out, .vcd, .txt)
	•	Plots (.png)
	•	Copied SystemVerilog and Python files

⸻

## Testbench Details
	•	Clock frequency: 100 MHz
	•	Input valid pattern: Active 1 cycle, inactive 3 cycles (valid every 4 cycles)
	•	Number of samples: 2048
	•	File output: CSV format with columns: valid_i, data_i, valid_o, data_o

⸻

## Notes
	•	Ensure the paths to Sources, Sim, and python script are correct if moving directories.
	•	Adjust NUM_SAMPLES or FS in tb_notch_filter.sv for longer simulations or different sampling rates.
	•	The scaling factor in the testbench ensures input signals fit within 16-bit signed integer representation (Q1.15 format).

